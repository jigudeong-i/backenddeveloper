<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>ajaxì— ê´€í•œ ì˜ˆì œ- chungnam.html</title>
		<link href="../image/icon.png" rel="icon" type="image/x-icon" />
        
        <link rel="stylesheet" href="../css/chungnam.css"/>
	</head>
	<body>
		<h1 class="title">ğŸ§³ì¶©ë‚¨ê´€ê´‘ - ê´€ê´‘ëª…ì†Œ</h1>
		<!-- ëª©ë¡ì´ ì¶œë ¥ë  ìš”ì†Œ -->
		<ul id="list">
			<li id="item-template" class="item">
				<span class="text">
					<span class="item-type"></span>
					<span class="item-title"></span>
					<span class="item-sub"></span>
					<span class="item-content"></span>
				</span>
			</li>
		</ul>
				
		<script src="../js/jquery-3.7.1.min.js"></script>
		<script>
			const template = function(local_nm, type, nm, nm_sub, desc){
				let $ul = $('#list');     // $ë³€ìˆ˜ : jqueryì˜ ê°ì²´ í‘œì‹œ
				 
				let $element = $('#item-template').clone().removeAttr('id');  // lië¥¼ ë³µì œí•˜ëŠ”ë° id ì†ì„±ì€ ì§€ìš°ê² ë‹¤. (idê¹Œì§€ ë³µì œë˜ë©´ ìœ ì¼ì„± ì‚¬ë¼ì§)
			    $element.find('.item-type').html(type);
			    $element.find('.item-title').html(nm);
			    $element.find('.item-sub').html(nm_sub);
			    $element.find('.item-content').html(desc);
	
			    $ul.append($element); 
			}
			
			$.ajax({
				url: '/firstExample/ajax/xml/chungnam.xml', 
				method: 'get',
				dataType: 'xml'
			}).done(function (data) {  // ë°›ì•„ì˜¨ xml ë°ì´í„°ë¥¼ 'data'ì— ë‹´ê² ë‹¤.
				$(data).find('item').each(function(){       // itemì„ ë°˜ë³µí•˜ê² ë‹¤(each)
					let local_nm = $(this).find("local_nm").text();
					let type = $(this).find("type").text();
					let nm = $(this).find("nm").text();
					let nm_sub = $(this).find("nm_sub").text();
					let desc = $(this).find("desc").text();
					
					template(local_nm, type, nm, nm_sub, desc);
				});
			}).fail(function(xhr, textStatus) {
				 //í†µì‹ ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜.
				alert(textStatus + " (HTTP-" + xhr.status +")");
			});
		</script>
	</body>
</html>